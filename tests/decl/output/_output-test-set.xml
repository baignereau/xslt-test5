<?xml version="1.0" encoding="UTF-8"?>
<test-set xmlns:xs="http://www.w3.org/2001/XMLSchema"
   xmlns="http://www.w3.org/2012/10/xslt-test-catalog" name="output">

   <description>Tests the xsl:output declaration, and hence serialization generally</description>
   

   <!-- 
      NOTE: (ABr, 2015-03-30) added dependency on serialization feature for the whole
      test-set, if tests are included here that should not need that feature, it 
      should be overridden in the test, but I assumed that none exist because all 
      tests here are about serialization
   -->    
   <dependencies>
      <feature value="serialization" satisfied="true"/>
   </dependencies>

   <environment name="output-01">
      <source role=".">
         <content><![CDATA[<doc/>]]></content>
      </source>
   </environment>

   <environment name="output-02">
      <source role=".">
         <content><![CDATA[<doc>
	<a>xx&#035;xx</a>
	<a>yy&#036;yy</a>
	<a>zz&#037;zz</a>
</doc>]]></content>
      </source>
   </environment>

   <environment name="output-03">
      <source role=".">
         <content><![CDATA[<doc><a>xx&#035;xx</a><a>yy&#042;&#036;yy</a><a>zz&#037;&#035;zz</a></doc>]]></content>
      </source>
   </environment>

   <environment name="output-04">
      <source role="." file="output04.xml"/>
   </environment>

   <!-- Test environments for HTML5 -->
   <environment name="output-06a">
      <stylesheet file="output-0601.xsl"/> 
      <output serialize="yes"/>
      <source role="." file="output06a.xml">
         <description>An XML/HTML tree containing prefixed elements in SVG, MathML and a foreign
            namespace</description>        
      </source>
   </environment>
   <environment name="output-06b">
      <stylesheet file="output-0601.xsl"/>
      <output serialize="yes"/>
      <source role="." file="output06b.xml">
         <description>An XML/HTML tree containing prefixed attributes in SVG, MathML and a foreign
            namespace</description>
      </source>
   </environment>
   
   
   

   <test-case name="output-0101">
      <description>Test escaping of non-ASCII characters in HTML output when @escape-uri-attributes=
         yes.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0101.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches>href=["']http://iri.example.org/%EF%AD%8F/%C3%A5rsrapport/%C3%A5r/2005\?x=y["']</serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0101a">
      <description>Test escaping of non-ASCII characters in HTML output when
         @escape-uri-attributes="true".</description>
      <created by="Debbie Lockett" on="2014-08-07"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0101a.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches>href=["']http://iri.example.org/%EF%AD%8F/%C3%A5rsrapport/%C3%A5r/2005\?x=y["']</serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0101b">
      <description>Test escaping of non-ASCII characters in HTML output when
         @escape-uri-attributes="1".</description>
      <created by="Debbie Lockett" on="2014-08-07"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0101b.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches>href=["']http://iri.example.org/%EF%AD%8F/%C3%A5rsrapport/%C3%A5r/2005\?x=y["']</serialization-matches>
      </result>
   </test-case>

   <environment name="output-0102">
      <stylesheet file="output-0102.xsl"/>
   </environment>

   <test-case name="output-0102a">
      <description>Test escaping of non-ASCII characters in XHTML output,
         @escape-uri-attributes=yes.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-0102"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <initial-template name="a"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches>href="%C2%A1"</serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0102b">
      <description>Test escaping of non-ASCII characters in XHTML output,
         @escape-uri-attributes=yes.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-0102"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <initial-template name="b"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches>href="%C2%96"</serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0102c">
      <description>Test escaping of non-ASCII characters in XHTML output,
         @escape-uri-attributes=yes.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29"
         change="added variant with hex encoding of character references"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-0102"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <initial-template name="c"/>
         <output serialize="yes"/>
      </test>
      <result>
         <any-of>
            <serialization-matches><![CDATA[href="% %C2%96 %C2%96 a &#34;  %C2%A1 &lt; &gt; &amp; end"]]></serialization-matches>
            <serialization-matches><![CDATA[href="% %C2%96 %C2%96 a &#x22;  %C2%A1 &lt; &gt; &amp; end"]]></serialization-matches>
         </any-of>
      </result>
   </test-case>

   <test-case name="output-0102d">
      <description>Test escaping of non-ASCII characters in XHTML output,
         @escape-uri-attributes=yes.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-0102"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <initial-template name="d"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches>accesskey="ยก"</serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0102e">
      <description>Test escaping of non-ASCII characters in XHTML output,
         @escape-uri-attributes=yes.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-0102"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <initial-template name="e"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches><![CDATA[accesskey="&#x96;"]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0102f">
      <description>Test escaping of non-ASCII characters in XHTML output,
         @escape-uri-attributes=yes.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-0102"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <initial-template name="f"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches>notxhtmlattr="ยก"</serialization-matches>
      </result>
   </test-case>

   <environment name="output-0103">
      <stylesheet file="output-0103.xsl"/>
   </environment>

   <test-case name="output-0103a">
      <description>Test escaping of non-ASCII characters in XHTML output,
         @escape-uri-attributes=no.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-0103"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <initial-template name="a"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches>href="ยก"</serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0103b">
      <description>Test escaping of non-ASCII characters in XHTML output,
         @escape-uri-attributes=no.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-0103"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <initial-template name="b"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches><![CDATA[href="&#x96;"]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0103c">
      <description>Test escaping of non-ASCII characters in XHTML output,
         @escape-uri-attributes=no.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29"
         change="added variant with hex encoding of character references"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-0103"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <initial-template name="c"/>
         <output serialize="yes"/>
      </test>
      <result>
         <any-of>
            <serialization-matches><![CDATA[href="% %C2%96 &#x96; a &#34;  ยก &lt; &gt; &amp; end"]]></serialization-matches>
            <serialization-matches><![CDATA[href="% %C2%96 &#x96; a &#x22;  ยก &lt; &gt; &amp; end"]]></serialization-matches>
         </any-of>
      </result>
   </test-case>

   <test-case name="output-0103d">
      <description>Test escaping of non-ASCII characters in XHTML output,
         @escape-uri-attributes=no.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-0103"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <initial-template name="d"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches>accesskey="ยก"</serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0103e">
      <description>Test escaping of non-ASCII characters in XHTML output,
         @escape-uri-attributes=no.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-0103"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <initial-template name="e"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches><![CDATA[accesskey="&#x96;"]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0103f">
      <description>Test escaping of non-ASCII characters in XHTML output,
         @escape-uri-attributes=no.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-0103"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <initial-template name="f"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches>notxhtmlattr="ยก"</serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0104">
      <description>Test avoidance of apos entity for XHTML output</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0104.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output011.out"/>
      </result>
   </test-case>

   <test-case name="output-0105">
      <description>Test with XHTML output method. The document element name is 'html' in the null
         namespace.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0105.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output017.out"/>
      </result>
   </test-case>

   <test-case name="output-0106">
      <description>Test with XHTML output where the stylesheet has a default namespace defined on
         the html element itself.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0106.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches><![CDATA[<\?xml version="1.0" encoding="UTF-8"\?>\s*<html xmlns="http://www.w3.org/1999/xhtml">\s*<body>This is the body</body>\s*</html>]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0106a">
      <description>Test indent="true", with XHTML output where the stylesheet has a default
         namespace defined on the html element itself.</description>
      <created by="Debbie Lockett" on="2014-08-07"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0106a.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches><![CDATA[<\?xml version="1.0" encoding="UTF-8"\?>\s*<html xmlns="http://www.w3.org/1999/xhtml">\s+<body>This is the body</body>\s+</html>]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0106b">
      <description>Test indent=" 1 ", with XHTML output where the stylesheet has a default namespace
         defined on the html element itself.</description>
      <created by="Debbie Lockett" on="2014-08-07"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0106b.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches><![CDATA[<\?xml version="1.0" encoding="UTF-8"\?>\s*<html xmlns="http://www.w3.org/1999/xhtml">\s+<body>This is the body</body>\s+</html>]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0107">
      <description>Test for SCRIPT handling with XHTML output method.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0107.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output021.out"/>
      </result>
   </test-case>

   <test-case name="output-0108">
      <description>Test for STYLE handling with XHTML output method.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0108.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output022.out"/>
      </result>
   </test-case>

   <test-case name="output-0109">
      <description>Test for the xhtml output method with an empty html tag</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0109.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output029.out"/>
      </result>
   </test-case>

   <test-case name="output-0110">
      <description>Test for the xhtml output method with omit-xml-declaration=yes.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0110.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output030.out"/>
      </result>
   </test-case>

   <test-case name="output-0110a">
      <description>Test for the xhtml output method with omit-xml-declaration="true".</description>
      <created by="Debbie Lockett" on="2014-08-07"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0110a.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output030.out"/>
      </result>
   </test-case>

   <test-case name="output-0110b">
      <description>Test for the xhtml output method with omit-xml-declaration="1".</description>
      <created by="Debbie Lockett" on="2014-08-07"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0110b.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output030.out"/>
      </result>
   </test-case>

   <test-case name="output-0111">
      <description>Test XHTML output with @doctype-system only.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0111.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output031.out"/>
      </result>
   </test-case>

   <test-case name="output-0112">
      <description>Test XHTML output with @doctype-public only. Show that attribute is
         ignored.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0112.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output032.out"/>
      </result>
   </test-case>

   <test-case name="output-0113">
      <description>Test XHTML output with @doctype-system and @doctype-public</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0113.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output033.out"/>
      </result>
   </test-case>

   <test-case name="output-0114">
      <description>Test XHTML output with cdata-section-elements that have ]]</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0114.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output042.out"/>
      </result>
   </test-case>

   <test-case name="output-0115">
      <description>Test XHTML output with cdata-section-elements that have ]]&gt;.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0115.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output043.out"/>
      </result>
   </test-case>

   <test-case name="output-0116">
      <description>Test empty elements with empty content model in XHTML output and
         @indent=no.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0116.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output045.out"/>
      </result>
   </test-case>

   <test-case name="output-0116a">
      <description>Test empty elements with empty content model in XHTML output and @indent="
         false".</description>
      <created by="Debbie Lockett" on="2014-08-07"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0116a.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output045.out"/>
      </result>
   </test-case>

   <test-case name="output-0116b">
      <description>Test empty elements with empty content model in XHTML output and
         @indent="0".</description>
      <created by="Debbie Lockett" on="2014-08-07"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0116b.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output045.out"/>
      </result>
   </test-case>

   <test-case name="output-0117">
      <description>Boolean attributes should not be output in minimized form.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="Use serialization-matches"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0117.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches><![CDATA[ selected="selected"]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0118">
      <description>Processing instructions should be terminated with "?&gt;". Output method is
         XHTML.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0118.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches><![CDATA[<\?my-pi href="book.css" type="text/css"\?>]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0119">
      <description>Simple test of XHTML output with @indent=no</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0119.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output050.out"/>
      </result>
   </test-case>

   <test-case name="output-0120">
      <description>Test of cdata-section-elements processing. &lt;example&gt; should not be
         processed.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0120.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output052.out"/>
      </result>
   </test-case>

   <test-case name="output-0121">
      <description>Test that the default value of @omit-xml-declaration with XHTML output method is
         'no'.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0121.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output053.out"/>
      </result>
   </test-case>

   <test-case name="output-0122">
      <description> All xsl:output elements are merged into a single element. While repeats of most
         attributes are just tested for conflicts, cdata-section-elements will contain the union of
         the specified values. Both example and test should be wrapped by CDATA, and the output
         should be XML (since cdata-section-elements only applies to XML). </description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0122.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xml" file="output054.out"/>
      </result>
   </test-case>

   <test-case name="output-0123">
      <description> Test HTML output with default value for @include-content-type, the result tree
         has a 'head' element. (default is 'yes') </description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="Use serialization-matches"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0123.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches flags="i"
               ><![CDATA[http-equiv="Content-Type"]]></serialization-matches>
            <serialization-matches><![CDATA[="Content-Type"]]></serialization-matches>
            <serialization-matches flags="i"
               ><![CDATA[content="application/xhtml-xml; charset=UTF-8"]]></serialization-matches>
            <serialization-matches><![CDATA[="application/xhtml-xml; charset=UTF-8"]]></serialization-matches>
            <serialization-matches><![CDATA[<HEAD>[^<]*<[Mm][Ee][Tt][Aa][^>\\]*>[^<]*</HEAD>]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0124">
      <description>Test HTML output with include-content-type=yes, the result tree has a 'head'
         element.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="Use serialization-matches"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0124.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches flags="i"
               ><![CDATA[http-equiv="Content-Type"]]></serialization-matches>
            <serialization-matches><![CDATA[="Content-Type"]]></serialization-matches>
            <serialization-matches flags="i"
               ><![CDATA[content="application/xhtml-xml; charset=UTF-8"]]></serialization-matches>
            <serialization-matches><![CDATA[="application/xhtml-xml; charset=UTF-8"]]></serialization-matches>
            <serialization-matches><![CDATA[<HEAD>[^<]*<[Mm][Ee][Tt][Aa][^>\\]*>[^<]*</HEAD>]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0124a">
      <description>Test HTML output with include-content-type="true", the result tree has a 'head'
         element.</description>
      <created by="Debbie Lockett" on="2014-08-07"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0124a.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches flags="i"
               ><![CDATA[http-equiv="Content-Type"]]></serialization-matches>
            <serialization-matches><![CDATA[="Content-Type"]]></serialization-matches>
            <serialization-matches flags="i"
               ><![CDATA[content="application/xhtml-xml; charset=UTF-8"]]></serialization-matches>
            <serialization-matches><![CDATA[="application/xhtml-xml; charset=UTF-8"]]></serialization-matches>
            <serialization-matches><![CDATA[<HEAD>[^<]*<[Mm][Ee][Tt][Aa][^>\\]*>[^<]*</HEAD>]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0124b">
      <description>Test HTML output with include-content-type="1", the result tree has a 'head'
         element.</description>
      <created by="Debbie Lockett" on="2014-08-07"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0124b.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches flags="i"
               ><![CDATA[http-equiv="Content-Type"]]></serialization-matches>
            <serialization-matches><![CDATA[="Content-Type"]]></serialization-matches>
            <serialization-matches flags="i"
               ><![CDATA[content="application/xhtml-xml; charset=UTF-8"]]></serialization-matches>
            <serialization-matches><![CDATA[="application/xhtml-xml; charset=UTF-8"]]></serialization-matches>
            <serialization-matches><![CDATA[<HEAD>[^<]*<[Mm][Ee][Tt][Aa][^>\\]*>[^<]*</HEAD>]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0125">
      <description>Test HTML output with include-content-type value set to "no".</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="Use serialization-matches"/>
      <modified by="Michael Kay" on="2013-01-31" change="Correct regex in 3rd assertion"/>
      <modified by="Debbie Lockett" on="2014-08-07" change="Add error to not/any-of assertions"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0125.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <not>
            <any-of>
               <error code="*"/>
               <serialization-matches flags="i"
                  ><![CDATA[http-equiv="Content-Type"]]></serialization-matches>
               <serialization-matches flags="i"
                  ><![CDATA[content="application/xhtml-xml; charset=UTF-8"]]></serialization-matches>
               <serialization-matches><![CDATA[<HEAD>[^<]*<[Mm][Ee][Tt][Aa][^>]*a[^<]*></HEAD>]]></serialization-matches>
            </any-of>
         </not>
      </result>
   </test-case>

   <test-case name="output-0125a">
      <description>Test HTML output with include-content-type value set to "false".</description>
      <created by="Debbie Lockett" on="2014-08-07"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0125a.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <not>
            <any-of>
               <error code="*"/>
               <serialization-matches flags="i"
                  ><![CDATA[http-equiv="Content-Type"]]></serialization-matches>
               <serialization-matches flags="i"
                  ><![CDATA[content="application/xhtml-xml; charset=UTF-8"]]></serialization-matches>
               <serialization-matches><![CDATA[<HEAD>[^<]*<[Mm][Ee][Tt][Aa][^>]*a[^<]*></HEAD>]]></serialization-matches>
            </any-of>
         </not>
      </result>
   </test-case>

   <test-case name="output-0125b">
      <description>Test HTML output with include-content-type value set to "0".</description>
      <created by="Debbie Lockett" on="2014-08-07"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0125b.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <not>
            <any-of>
               <error code="*"/>
               <serialization-matches flags="i"
                  ><![CDATA[http-equiv="Content-Type"]]></serialization-matches>
               <serialization-matches flags="i"
                  ><![CDATA[content="application/xhtml-xml; charset=UTF-8"]]></serialization-matches>
               <serialization-matches><![CDATA[<HEAD>[^<]*<[Mm][Ee][Tt][Aa][^>]*a[^<]*></HEAD>]]></serialization-matches>
            </any-of>
         </not>
      </result>
   </test-case>

   <test-case name="output-0126">
      <description>Test XHTML output with default value for @include-content-type, the result tree
         has a 'head' element in the XHTML namespace and
         '@media-type="application/xhtml-xml".</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0126.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output064.out"/>
      </result>
   </test-case>

   <test-case name="output-0127">
      <description>Test XHTML output with include-content-type=no. The document element of the final
         result tree is 'html' in the XHTML namespace.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0127.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output066.out"/>
      </result>
   </test-case>

   <test-case name="output-0128">
      <description>Test XML output DOES NOT output a meta tag when include-content-type is specified
         and head element is present</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0128.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xml" file="output067.out"/>
      </result>
   </test-case>

   <test-case name="output-0129">
      <description>Test Text output DOES NOT output a meta tag when include-content-type is
         specified and head element is present</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0129.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="html" file="output068.out"/>
      </result>
   </test-case>

   <test-case name="output-0130">
      <description>Test with no output method explicitly specified and the document element of the
         implicit result tree is html in the XHTML namespace. Show to output method defaults to
         XHTML.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="Use serialization-matches"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0130.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches flags="i"
               ><![CDATA[http-equiv="Content-Type"]]></serialization-matches>
            <serialization-matches><![CDATA[="Content-Type"]]></serialization-matches>
            <serialization-matches flags="i"
               ><![CDATA[content="text/html; charset=UTF-8"]]></serialization-matches>
            <serialization-matches><![CDATA[="text/html; charset=UTF-8"]]></serialization-matches>
            <serialization-matches><![CDATA[<\?xml version="1.0" encoding="UTF-8"\?>]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0131">
      <description>Test serialization of invalid XHTML. Not an error.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0131.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output104.out"/>
      </result>
   </test-case>

   <test-case name="output-0132">
      <description>Test with NCName for @name and xsl:output method=xhtml. Use the named output
         definition in xsl:result document.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0132.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output106.out"/>
      </result>
   </test-case>

   <test-case name="output-0133">
      <description>Test with prefixed local name for @name and xsl:output method=xhtml.Use the named
         output definition in xsl:result document.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0133.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output107.out"/>
      </result>
   </test-case>

   <test-case name="output-0134">
      <description> Test with a named and unnamed output definition. Show that the unnamed output
         definition is used to serialize the implicit final result tree. </description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0134.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output108.out"/>
      </result>
   </test-case>

   <test-case name="output-0135">
      <description> Show that merging of output declarations is done after expanding the QNames in
         @name. (use two declarations with the same local name but different prefixes bound to one
         and the same namespace) </description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0135.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output110.out"/>
      </result>
   </test-case>

   <test-case name="output-0136">
      <description>Test XHTML output with @byte-order-mark=yes. Encoding is UTF-8.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0136.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<\?xml]]></serialization-matches>
            <serialization-matches><![CDATA[<html\s+xmlns="http://www.w3.org/1999/xhtml">]]></serialization-matches>
            <serialization-matches><![CDATA[<body>Hello</body>]]></serialization-matches>
            <serialization-matches>^&#xfeff;</serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0136a">
      <description>Test XHTML output with @byte-order-mark=true. Encoding is UTF-8.</description>
      <created by="Debbie Lockett" on="2014-08-06"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0136a.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<\?xml]]></serialization-matches>
            <serialization-matches><![CDATA[<html\s+xmlns="http://www.w3.org/1999/xhtml">]]></serialization-matches>
            <serialization-matches><![CDATA[<body>Hello</body>]]></serialization-matches>
            <serialization-matches>^&#xfeff;</serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0136b">
      <description>Test XHTML output with @byte-order-mark="1". Encoding is UTF-8.</description>
      <created by="Debbie Lockett" on="2014-08-06"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0136b.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<\?xml]]></serialization-matches>
            <serialization-matches><![CDATA[<html\s+xmlns="http://www.w3.org/1999/xhtml">]]></serialization-matches>
            <serialization-matches><![CDATA[<body>Hello</body>]]></serialization-matches>
            <serialization-matches>^&#xfeff;</serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0137">
      <description>Test XHTML output with @byte-order-mark=no.Encoding is UTF-8.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0137.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="text" file="output113.out"/>
      </result>
   </test-case>

   <test-case name="output-0137a">
      <description>Test XHTML output with @byte-order-mark=false. Encoding is UTF-8.</description>
      <created by="Debbie Lockett" on="2014-08-06"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0137a.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="text" file="output113.out"/>
      </result>
   </test-case>

   <test-case name="output-0137b">
      <description>Test XHTML output with @byte-order-mark="0". Encoding is UTF-8.</description>
      <created by="Debbie Lockett" on="2014-08-06"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0137b.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="text" file="output113.out"/>
      </result>
   </test-case>

   <test-case name="output-0138">
      <description>Test of XHTML output with @cdata-section-elements with a list of names with or
         without prefixes.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0138.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output117.out"/>
      </result>
   </test-case>

   <test-case name="output-0139">
      <description>Test XHTML output method with @encoding=UTF-8.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0139.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output121.out"/>
      </result>
   </test-case>

   <test-case name="output-0140">
      <description>Test XHTML output method with @encoding=UTF-16.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="Use serialization-matches"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0140.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches><![CDATA[<\?xml version="1.0" encoding="UTF-16"\?>]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0141">
      <description>Test XHTML output with @escape-uri-attributes=no. Use fn:escape-html-uri to
         escape some URIs but not all.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="Use serialization-matches"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0141.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<a href="http://iri.example.org/๏ญ/รฅrsrapport/aฬr/2005\?x=y">not escaped</a>]]></serialization-matches>
            <serialization-matches><![CDATA[<a href="http://iri.example.org/%EF%AD%8F/%C3%A5rsrapport/a%CC%8Ar/2005\?x=y"></a>]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0141a">
      <description>Test XHTML output with @escape-uri-attributes="false". Use fn:escape-html-uri to
         escape some URIs but not all.</description>
      <created by="Debbie Lockett" on="2014-08-07"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0141a.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<a href="http://iri.example.org/๏ญ/รฅrsrapport/aฬr/2005\?x=y">not escaped</a>]]></serialization-matches>
            <serialization-matches><![CDATA[<a href="http://iri.example.org/%EF%AD%8F/%C3%A5rsrapport/a%CC%8Ar/2005\?x=y"></a>]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0141b">
      <description>Test XHTML output with @escape-uri-attributes=" 0 ". Use fn:escape-html-uri to
         escape some URIs but not all.</description>
      <created by="Debbie Lockett" on="2014-08-07"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0141b.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<a href="http://iri.example.org/๏ญ/รฅrsrapport/aฬr/2005\?x=y">not escaped</a>]]></serialization-matches>
            <serialization-matches><![CDATA[<a href="http://iri.example.org/%EF%AD%8F/%C3%A5rsrapport/a%CC%8Ar/2005\?x=y"></a>]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0142">
      <description>Test XHTML output with include-content-type=yes, the result tree has a 'head'
         element in the XHTML namespace and '@media-type="application/xhtml-xml".</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0142.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output126.out"/>
      </result>
   </test-case>

   <test-case name="output-0143">
      <description>Test XHTML output with include-content-type=yes and 'meta
         http-equiv="Content-Type"' tag already present.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0143.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output127.out"/>
      </result>
   </test-case>

   <test-case name="output-0144">
      <description>Test XHTML output with include-content-type=yes and 'meta
         http-equiv="Content-Type "' tag already present with additional parameters in the 'content'
         attribute value. Example from spec.</description>
      <created by="XSLT Editors" on="2012-11-07"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0144.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output129.out"/>
      </result>
   </test-case>

   <test-case name="output-0145">
      <description>Test that @media-type can be specified on output method xhtml. Value used is
         "application/postscript"</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0145.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output131.out"/>
      </result>
   </test-case>

   <test-case name="output-0146">
      <description>Test of XTHML output with @normalization-form=NFC.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0146.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output132.out"/>
      </result>
   </test-case>

   <test-case name="output-0147">
      <description>Test of XTHML output with @normalization-form=none.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0147.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output133.out"/>
      </result>
   </test-case>

   <test-case name="output-0148">
      <description>Test for the xhtml output method with omit-xml-declaration=no</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0148.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output134.out"/>
      </result>
   </test-case>

   <test-case name="output-0148a">
      <description>Test for the xhtml output method with omit-xml-declaration="false"</description>
      <created by="Debbie Lockett" on="2014-08-07"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0148a.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output134.out"/>
      </result>
   </test-case>

   <test-case name="output-0148b">
      <description>Test for the xhtml output method with omit-xml-declaration="0"</description>
      <created by="Debbie Lockett" on="2014-08-07"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0148b.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output134.out"/>
      </result>
   </test-case>

   <test-case name="output-0149">
      <description>Test for the xhtml output method @standalone=yes.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0149.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output136.out"/>
      </result>
   </test-case>

   <test-case name="output-0149a">
      <description>Test for the xhtml output method @standalone="true".</description>
      <created by="Debbie Lockett" on="2014-08-07"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0149a.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output136.out"/>
      </result>
   </test-case>

   <test-case name="output-0149b">
      <description>Test for the xhtml output method @standalone="1".</description>
      <created by="Debbie Lockett" on="2014-08-07"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0149b.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output136.out"/>
      </result>
   </test-case>

   <test-case name="output-0150">
      <description>Test for the xhtml output method @standalone=no.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0150.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output137.out"/>
      </result>
   </test-case>

   <test-case name="output-0150a">
      <description>Test for the xhtml output method @standalone="false".</description>
      <created by="Debbie Lockett" on="2014-08-07"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0150a.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output137.out"/>
      </result>
   </test-case>

   <test-case name="output-0150b">
      <description>Test for the xhtml output method @standalone="0".</description>
      <created by="Debbie Lockett" on="2014-08-07"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0150b.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output137.out"/>
      </result>
   </test-case>

   <test-case name="output-0151">
      <description>Test empty elements with non-empty content model in XHTML output.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0151.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output138.out"/>
      </result>
   </test-case>

   <test-case name="output-0152">
      <description>Test for the xhtml output method @standalone=omit.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0152.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output139.out"/>
      </result>
   </test-case>

   <test-case name="output-0153">
      <description>Test XHTML output method with @version=1.0</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0153.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output140.out"/>
      </result>
   </test-case>

   <test-case name="output-0154">
      <description>Test HTML output method with illegal content inside the 'script' tag. Example
         from spec. The escaping must be done manually.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0154.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="html" file="output142.out"/>
      </result>
   </test-case>

   <test-case name="output-0155a">
      <description>Test that @escape-uri-attributes with XML output method is ignored.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0155.xsl"/>
         <initial-mode name="a"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches><![CDATA[href="ยก"]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0155b">
      <description>Test that @escape-uri-attributes with XML output method is ignored.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0155.xsl"/>
         <initial-mode name="a"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches><![CDATA[href="ยก"]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0156">
      <description>Test that @include-content-type with XML output method is ignored.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0156.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<\?xml]]></serialization-matches>
            <serialization-matches><![CDATA[<out\s+xmlns="http://www.w3.org/1999/xhtml">Hello</out>]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0157">
      <description>Test HTML output with include-content-type=yes and 'meta http-equiv="Content-Type
         "' tag already present.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="Use serialization-matches"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0157.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches flags="i"
               ><![CDATA[http-equiv="Content-Type"]]></serialization-matches>
            <serialization-matches><![CDATA[="Content-Type"]]></serialization-matches>
            <serialization-matches flags="i"
               ><![CDATA[content="text/html; charset=UTF-8"]]></serialization-matches>
            <serialization-matches><![CDATA[="text/html; charset=UTF-8"]]></serialization-matches>
            <serialization-matches><![CDATA[<HEAD>[^<]*<[Mm][Ee][Tt][Aa][^>\\]*>[^<]*</HEAD>]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0158">
      <description>Test HTML output with include-content-type=yes and 'meta http-equiv="Content-Type
         "' tag already present with additional parameters in the 'content' attribute value. Example
         from spec.</description>
      <created by="XSLT Editors" on="2012-11-07"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0158.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[="Content-Type"]]></serialization-matches>
            <serialization-matches flags="i"
               ><![CDATA[http-equiv="Content-Type"]]></serialization-matches>
            <serialization-matches><![CDATA[="text/html; charset=UTF-8"]]></serialization-matches>
            <serialization-matches flags="i"
               ><![CDATA[content="text/html; charset=UTF-8"]]></serialization-matches>
            <serialization-matches><![CDATA[<HEAD>[^<]*<[Mm][Ee][Tt][Aa][^>\\]*>[^<]*</HEAD>]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0159">
      <description> Test HTML output method with illegal content inside the 'script' tag. Example
         from spec. The escaping must be done manually. </description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0159.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<meta\s+http-equiv="Content-Type"]]></serialization-matches>
            <serialization-matches><![CDATA[<script\s+type="text/javascript">document\.write\s\("<EM>This will work<\\/EM>"\)\s+</script>]]></serialization-matches>
            <serialization-matches><![CDATA[<style>\s+<\s>\s&\s+</style>]]></serialization-matches>
            <!--<serialization-matches><![CDATA[<pre>\s+<b> Save    all	space here</b>\s+</pre>]]></serialization-matches>-->
            <serialization-matches><![CDATA[<textarea\s+rows="2"\s+cols="20">\s+The cat was playing in the garden.\s+Suddenly a dog showed up.....\s+</textarea>]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0160">
      <description>Test that whitespace is not added or removed adjacent to elements ins and del if
         they do not contain element children; indent=no with HTML output method.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="Use serialization-matches"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <modified by="Abel Braaksma" on="2015-05-17" change="Bug 28498, allowing different line endings"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0160.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches flags="s"
            ><![CDATA[is <del>(?:[\n\r]|\r\n)    \t\t\t20\t</del><ins>     1 2 </ins> pieces]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0161">
      <description>Test of HTML output with @normalization-form=none.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0161.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="html" file="output153.out"/>
      </result>
   </test-case>

   <test-case name="output-0162">
      <description>Test HTML output with @byte-order-mark=yes.Encoding is UTF-8.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0162.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<html><body>Hello</body></html>]]></serialization-matches>
            <serialization-matches>^&#xfeff;</serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0163">
      <description>Test HTML output with @byte-order-mark=no. Encoding is UTF-8.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0163.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="text" file="output156.out"/>
      </result>
   </test-case>

   <test-case name="output-0164">
      <description>Test HTML output with default value for @escape-uri-attributes. (default is
         'yes')</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0164.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="html" file="output159.out"/>
      </result>
   </test-case>

   <test-case name="output-0165">
      <description>Test XML output with @byte-order-mark=yes.Encoding is UTF-8.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0165.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<html><body>Hello</body></html>]]></serialization-matches>
            <serialization-matches>^&#xfeff;</serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0166">
      <description>Test XML output with @byte-order-mark=no. Encoding is UTF-8.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0166.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="text" file="output166.out"/>
      </result>
   </test-case>

   <test-case name="output-0167">
      <description>Test of XML output with @normalization-form=NFC.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0167.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xml" file="output169.out"/>
      </result>
   </test-case>

   <test-case name="output-0168">
      <description>Test of XML output with @normalization-form=none.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0168.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xml" file="output170.out"/>
      </result>
   </test-case>

   <test-case name="output-0169">
      <description>Test of TEXT output with @normalization-form=NFC.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0169.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="text" file="output171.out"/>
      </result>
   </test-case>

   <test-case name="output-0170">
      <description>Test of TEXT output with @normalization-form=none.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0170.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="text" file="output172.out"/>
      </result>
   </test-case>

   <test-case name="output-0171">
      <description>Test TEXT output with @byte-order-mark=yes.Encoding is UTF-8.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0171.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches>Hello</serialization-matches>
            <serialization-matches>^&#xfeff;</serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0172">
      <description>Test TEXT output with @byte-order-mark=no.Encoding is UTF-8.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0172.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches>^Hello$</serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0173">
      <description>Test of merging two unnamed output declarations with non-overlapping attributes.
         (output method is XML)</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0173.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output192.out"/>
      </result>
   </test-case>

   <test-case name="output-0174">
      <description>Test of merging two named output declarations with non-overlapping
         attributes.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0174.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output193.out"/>
      </result>
   </test-case>

   <test-case name="output-0175">
      <description> Test with two named output declarations with the same name and the same import
         precedence and different values for the same attributes, then a third output declaration
         with the same name but with higher precedence which sets values for the conflicting
         attributes. Show that there is no conflict and the third named output declaration is used. </description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0175.xsl"/>
         <stylesheet file="output-0175a.xsl" role="secondary"/>
         <stylesheet file="output-0175b.xsl" role="secondary"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output196.out"/>
      </result>
   </test-case>

   <test-case name="output-0176">
      <description>Test for disabling output escaping in xsl:text</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
         <feature value="disabling_output_escaping"/>
      </dependencies>
      <test>
         <stylesheet file="output-0176.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output176.out"/>
      </result>
   </test-case>

   <test-case name="output-0176a">
      <description>Test for disabling-output-escaping="true" in xsl:text</description>
      <created by="Debbie Lockett" on="2014-08-08"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
         <feature value="disabling_output_escaping"/>
      </dependencies>
      <test>
         <stylesheet file="output-0176a.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output176.out"/>
      </result>
   </test-case>

   <test-case name="output-0176b">
      <description>Test for disabling-output-escaping="1" in xsl:text</description>
      <created by="Debbie Lockett" on="2014-08-08"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
         <feature value="disabling_output_escaping"/>
      </dependencies>
      <test>
         <stylesheet file="output-0176b.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output176.out"/>
      </result>
   </test-case>

   <test-case name="output-0176c">
      <description>Test for disabling-output-escaping=" no " in xsl:text</description>
      <created by="Debbie Lockett" on="2014-08-08"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
         <feature value="disabling_output_escaping"/>
      </dependencies>
      <test>
         <stylesheet file="output-0176c.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches><![CDATA[<body>&lt;p&gt;&amp;nbsp;&lt;/p&gt;</body>]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0176d">
      <description>Test for disabling-output-escaping="false" in xsl:text</description>
      <created by="Debbie Lockett" on="2014-08-08"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
         <feature value="disabling_output_escaping"/>
      </dependencies>
      <test>
         <stylesheet file="output-0176d.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches><![CDATA[<body>&lt;p&gt;&amp;nbsp;&lt;/p&gt;</body>]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0176e">
      <description>Test for disabling-output-escaping="0" in xsl:text</description>
      <created by="Debbie Lockett" on="2014-08-08"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
         <feature value="disabling_output_escaping"/>
      </dependencies>
      <test>
         <stylesheet file="output-0176e.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches><![CDATA[<body>&lt;p&gt;&amp;nbsp;&lt;/p&gt;</body>]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0176f">
      <description>Test for disabling-output-escaping=" " (not allowed) in xsl:text</description>
      <created by="Debbie Lockett" on="2014-08-08"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
         <feature value="disabling_output_escaping"/>
      </dependencies>
      <test>
         <stylesheet file="output-0176f.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <any-of>
            <assert-serialization-error code="SEPM0016"/>
            <error code="XTSE0020"/>
         </any-of>
      </result>
   </test-case>

   <test-case name="output-0177">
      <description>Test for disabling output escaping in xsl:text when not supported or switched off</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <modified by="Abel Braaksma" on="2015-03-30" change="
         Bug 23896
         - Fix to allow for optional recovery,
         - changed to 2.0 only (error is not allowed in 3.0),
         - added 3.0 version output-0177a"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20"/>
         <feature value="disabling_output_escaping" satisfied="false"/>
      </dependencies>
      <test>
         <stylesheet file="output-0176.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <any-of>
            <!-- optional recovery option is to ignore it and not raise an error -->
            <assert-serialization><![CDATA[<html xmlns="http://www.w3.org/1999/xhtml"><body>&lt;p&gt;&amp;nbsp;&lt;/p&gt;</body></html>]]></assert-serialization>
            
            <!-- or not recover and raise the error -->
            <error code="XTRE1620"/>
         </any-of>
      </result>
   </test-case>

   <test-case name="output-0177a">
      <description>Test for disabling output escaping in xsl:text for XSLT 3.0 when not supported or switched off (no error, must ignore d-o-e)</description>
      <created by="Abel Braaksma" on="2015-03-30"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
         <feature value="disabling_output_escaping" satisfied="false"/>
      </dependencies>
      <test>
         <stylesheet file="output-0176.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization><![CDATA[<html xmlns="http://www.w3.org/1999/xhtml"><body>&lt;p&gt;&amp;nbsp;&lt;/p&gt;</body></html>]]></assert-serialization>
      </result>
   </test-case>

   <test-case name="output-0178">
      <description>Test with unsupported value for @encoding, output method is XHTML. Two
         alternative results, since the serializer is allowed to report the error or recover by
         using a different encoding.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="error to assert-serialization-error"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
         <default_output_encoding value="UTF-8"/>
      </dependencies>
      <test>
         <stylesheet file="output-0178.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <any-of>
            <assert-serialization-error code="SESU0007"/>
            <serialization-matches><![CDATA[>hello<]]></serialization-matches>
         </any-of>
      </result>
   </test-case>

   <test-case name="output-0180">
      <description>Test with unsupported value for @encoding, output method is XML. Two alternative
         results, since the serializer is allowed to report the error or recover by using a
         different encoding.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="Use serialization-matches"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
         <default_output_encoding value="UTF-8"/>
      </dependencies>
      <test>
         <stylesheet file="output-0180.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <any-of>
            <assert-serialization-error code="SESU0007"/>
            <serialization-matches><![CDATA[>hello<]]></serialization-matches>
         </any-of>
      </result>
   </test-case>

   <test-case name="output-0182">
      <description> Test that an error is raised if @standalone value is other than omit and the
         instance of the data model contains multiple elements children of the root node. </description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="error to assert-serialization-error"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0182.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization-error code="SEPM0004"/>
      </result>
   </test-case>

   <test-case name="output-0183">
      <description> Test that an error is raised if @doctype-system is specified and the instance of
         the data model contains multiple elements children of the root node. </description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="error to assert-serialization-error"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0183.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization-error code="SEPM0004"/>
      </result>
   </test-case>

   <test-case name="output-0184">
      <description>Test that an error is raised if the value of @encoding in output method HTML is
         not supported.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="error to assert-serialization-error"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0184.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization-error code="SESU0007"/>
      </result>
   </test-case>

   <test-case name="output-0185">
      <description>Test that an error is raised if the value of @encoding in output method TEXT is
         not supported.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="error to assert-serialization-error"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0185.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization-error code="SESU0007"/>
      </result>
   </test-case>

   <test-case name="output-0186">
      <description> Test that an error is raised if @omit-xml-declarations="yes" in xsl:output and
         @standalone is other than 'omit'. </description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="error to assert-serialization-error"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0186.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization-error code="SEPM0009"/>
      </result>
   </test-case>

   <test-case name="output-0187">
      <description> Test that an error is raised if @omit-xml-declarations="yes" in xsl:output and
         @version is other than '1.0' and @doctype-system is specified. </description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="error to assert-serialization-error"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0187.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization-error code="SEPM0009"/>
      </result>
   </test-case>

   <test-case name="output-0188">
      <description>Test that an error is raised when in xsl:output @method="xml",
         @undeclare-prefixes="yes", and @version="1.0"</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="error to assert-serialization-error"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0188.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization-error code="SEPM0010"/>
      </result>
   </test-case>

   <test-case name="output-0189">
      <description>Test that an error is raised if the value of @normalization-form in output method
         XML is not supported by the serializer.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="error to assert-serialization-error"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0189.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization-error code="SESU0011"/>
      </result>
   </test-case>

   <test-case name="output-0190">
      <description>Test that an error is raised if the value of @normalization-form in output method
         XHTML is not supported by the serializer.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="error to assert-serialization-error"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0190.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization-error code="SESU0011"/>
      </result>
   </test-case>

   <test-case name="output-0191">
      <description>Test that an error is raised if the value of @normalization-form in output method
         HTML is not supported by the serializer.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="error to assert-serialization-error"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0191.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization-error code="SESU0011"/>
      </result>
   </test-case>

   <test-case name="output-0192">
      <description>Test that an error is raised if the value of @normalization-form in output method
         TEXT is not supported by the serializer.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="error to assert-serialization-error"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0192.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization-error code="SESU0011"/>
      </result>
   </test-case>

   <test-case name="output-0193">
      <description>Test that an error is raised if @normalization-form="fully-normalized" and the
         result begins with a combining character.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="all-of to any-of"/>
      <modified by="Tim Mills" on="2013-01-29" change="error to assert-serialization-error"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0193.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <any-of>
            <assert-serialization-error code="SERE0012"/>
            <assert-serialization-error code="SESU0011"/>
         </any-of>
      </result>
   </test-case>

   <test-case name="output-0194">
      <description>Test that an error is raised if in xsl:output @method="html" and the value of
         @version is not supported by the serializer.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="error to assert-serialization-error"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0194.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization-error code="SESU0013"/>
      </result>
   </test-case>

   <test-case name="output-0195">
      <description>Test that an error is raised if the output method is HTML and the result tree
         contains characters in the #x7F-#x9F range.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="error to assert-serialization-error"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0195.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization-error code="SERE0014"/>
      </result>
   </test-case>

   <test-case name="output-0196">
      <description>Test that an error is raised if the output method is HTML and &gt; appears within
         a processing instruction in the result tree.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="error to assert-serialization-error"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0196.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization-error code="SERE0015"/>
      </result>
   </test-case>

   <test-case name="output-0197">
      <description>Test that an error is raised on invalid @byte-order-mark value in
         xsl:output.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="all-of to any-of"/>
      <modified by="Tim Mills" on="2013-01-29" change="error to assert-serialization-error"/>
      <modified by="Debbie Lockett" on="2014-08-06"
         change="spec value to XSLT20 only, see test output-0197a"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20"/>
      </dependencies>
      <test>
         <stylesheet file="output-0197.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <any-of>
            <assert-serialization-error code="SEPM0016"/>
            <error code="XTSE0020"/>
         </any-of>
      </result>
   </test-case>

   <test-case name="output-0197a">
      <description>Test that an error is raised on invalid @byte-order-mark value ("TRUE") in
         xsl:output.</description>
      <created by="Debbie Lockett" on="2014-08-06"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0197a.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <any-of>
            <assert-serialization-error code="SEPM0016"/>
            <error code="XTSE0020"/>
         </any-of>
      </result>
   </test-case>

   <test-case name="output-0198">
      <description>Test that an error is raised on invalid @escape-uri-attributes value in
         xsl:output.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="all-of to any-of"/>
      <modified by="Tim Mills" on="2013-01-29" change="error to assert-serialization-error"/>
      <modified by="Debbie Lockett" on="2014-08-06"
         change="spec value to XSLT20 only, see test output-0198a"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20"/>
      </dependencies>
      <test>
         <stylesheet file="output-0198.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <any-of>
            <assert-serialization-error code="SEPM0016"/>
            <error code="XTSE0020"/>
         </any-of>
      </result>
   </test-case>

   <test-case name="output-0198a">
      <description>Test that an error is raised on invalid @escape-uri-attributes value ("YES") in
         xsl:output.</description>
      <created by="Debbie Lockett" on="2014-08-06"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0198a.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <any-of>
            <assert-serialization-error code="SEPM0016"/>
            <error code="XTSE0020"/>
         </any-of>
      </result>
   </test-case>

   <test-case name="output-0199">
      <description>Test that an error is raised on invalid @include-content-type value in
         xsl:output.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="all-of to any-of"/>
      <modified by="Debbie Lockett" on="2014-08-06"
         change="spec value to XSLT20 only, see test output-0199a"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20"/>
      </dependencies>
      <test>
         <stylesheet file="output-0199.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <any-of>
            <assert-serialization-error code="SEPM0016"/>
            <error code="XTSE0020"/>
         </any-of>
      </result>
   </test-case>

   <test-case name="output-0199a">
      <description>Test that an error is raised on invalid @include-content-type value ("TRUE") in
         xsl:output.</description>
      <created by="Debbie Lockett" on="2014-08-06"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0199a.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <any-of>
            <assert-serialization-error code="SEPM0016"/>
            <error code="XTSE0020"/>
         </any-of>
      </result>
   </test-case>

   <test-case name="output-0201">
      <description>Simple test for using one character map with the XML output method.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0201.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xml" file="output012.out"/>
      </result>
   </test-case>

   <test-case name="output-0202">
      <description>Simple test for xsl:character-map and @use-character-maps defined on
         it.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0202.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xml" file="output013.out"/>
      </result>
   </test-case>

   <test-case name="output-0203">
      <description>Test xsl:character-map with two different mappings of the same character, one
         from @use-character-maps and one from xsl:output-character.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0203.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xml" file="output014.out"/>
      </result>
   </test-case>

   <test-case name="output-0204">
      <description>Test for one imported xsl:character-map, no character maps declared in primary
         stylesheet.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="added role attributes"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0204.xsl" role="principal"/>
         <stylesheet file="x.xsl" role="secondary"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xml" file="output015.out"/>
      </result>
   </test-case>

   <test-case name="output-0205">
      <description>Test for xsl:character-map and @use-character-maps referencing another character
         map with prefixed name by using a different prefix bound to the same
         namespace.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0205.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xml" file="output181.out"/>
      </result>
   </test-case>

   <test-case name="output-0206">
      <description>Simple test for xsl:character-map and @use-character-maps referencing the same
         character map more than once.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0206.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xml" file="output184.out"/>
      </result>
   </test-case>

   <test-case name="output-0207">
      <description>Test with two character maps with the same name but with different import
         precedence. Show that the one with higher precedence is used.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="added role attributes"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0207.xsl" role="principal"/>
         <stylesheet file="x.xsl" role="secondary"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xml" file="output185.out"/>
      </result>
   </test-case>

   <test-case name="output-0208">
      <description>Test XHTML 5.0 DOCTYPE declaration.</description>
      <created by="Michael Kay" on="2012-12-05"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0208.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<!DOCTYPE html>\s*<html]]></serialization-matches>
            <serialization-matches><![CDATA[<meta\s+]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0209">
      <description>Test XHTML 5.0 DOCTYPE declaration.</description>
      <created by="Michael Kay" on="2012-12-05"/>
      <modified by="Abel Braaksma" on="2013-12-10"
         change="@html-version occured in xslt3.0 spec, stylesheet @version=3.0"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0209.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches><![CDATA[<!DOCTYPE HTML>\s*<HTML]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0210">
      <description>Test XHTML 5.0 DOCTYPE declaration.</description>
      <created by="Michael Kay" on="2012-12-05"/>
      <modified by="Abel Braaksma" on="2013-12-10"
         change="@html-version occured in xslt3.0 spec, stylesheet @version=3.0"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0210.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches><![CDATA[<!DOCTYPE HtMl>\s*<HtMl]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0211">
      <description>Test XHTML 5.0 DOCTYPE declaration with a namespace prefix (which gets
         stripped).</description>
      <created by="Michael Kay" on="2012-12-05"/>
      <modified by="Abel Braaksma" on="2013-12-10"
         change="@html-version occured in xslt3.0 spec, stylesheet @version=3.0"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0211.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<!DOCTYPE html>\s*<html]]></serialization-matches>
            <serialization-matches>xmlns=["']http://www.w3.org/1999/xhtml['"]</serialization-matches>
            <not>
               <serialization-matches>xmlns:h</serialization-matches>
            </not>
            <not>
               <serialization-matches>h:</serialization-matches>
            </not>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0212">
      <description> Test XHTML 5.0 DOCTYPE declaration. Uses "5.00" as the version, and whitespace
         before the html element. </description>
      <created by="Michael Kay" on="2012-12-05"/>
      <modified by="Abel Braaksma" on="2013-12-10"
         change="@html-version occured in xslt3.0 spec, stylesheet @version=3.0"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0212.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches><![CDATA[<!DOCTYPE html>\s*<html]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0213">
      <description> Test XHTML 5.0: no DOCTYPE declaration because top-level element is not html. </description>
      <created by="Michael Kay" on="2012-12-05"/>
      <modified by="Abel Braaksma" on="2013-12-10"
         change="@html-version occured in xslt3.0 spec, stylesheet @version=3.0"/>
      <modified by="Debbie Lockett" on="2014-08-07" change="Add error in not/any-of assertions"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0213.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <not>
            <any-of>
               <error code="*"/>
               <serialization-matches>DOCTYPE</serialization-matches>
            </any-of>
         </not>
      </result>
   </test-case>

   <test-case name="output-0214">
      <description> Test XHTML 5.0: top-level element in alien namespace. </description>
      <created by="Michael Kay" on="2012-12-05"/>
      <modified by="Abel Braaksma" on="2013-12-10"
         change="@html-version occured in xslt3.0 spec, stylesheet @version=3.0"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0214.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<html\s+xmlns="http://www.example.com/not-xhtml">]]></serialization-matches>
            <not>
               <serialization-matches>DOCTYPE</serialization-matches>
            </not>
            <not>
               <serialization-matches>meta</serialization-matches>
            </not>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0215">
      <description> Test XHTML 5.0: top-level element in alien prefixed namespace. </description>
      <created by="Michael Kay" on="2012-12-05"/>
      <modified by="Abel Braaksma" on="2013-12-10"
         change="@html-version occured in xslt3.0 spec, stylesheet @version=3.0"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0215.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<z:html\s+xmlns:z="http://www.example.com/not-xhtml">]]></serialization-matches>
            <not>
               <serialization-matches>DOCTYPE</serialization-matches>
            </not>
            <not>
               <serialization-matches>meta</serialization-matches>
            </not>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0216">
      <description> Test XHTML 5.0: empty elements in XHTML namespace. </description>
      <created by="Michael Kay" on="2012-12-05"/>
      <modified by="Abel Braaksma" on="2013-12-10"
         change="@html-version occured in xslt3.0 spec, stylesheet @version=3.0"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0216.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<area\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<base\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<br\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<col\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<command\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<embed\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<hr\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<img\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<input\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<keygen\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<link\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<meta\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<param\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<source\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<track\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<wbr\s*/>]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0217">
      <description> Test XHTML 5.0: empty elements in no namespace. </description>
      <created by="Michael Kay" on="2012-12-05"/>
      <modified by="Abel Braaksma" on="2013-12-10"
         change="@html-version occured in xslt3.0 spec, stylesheet @version=3.0"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0217.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<area\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<base\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<br\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<col\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<command\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<embed\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<hr\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<img\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<input\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<keygen\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<link\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<meta\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<param\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<source\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<track\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<wbr\s*/>]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0218">
      <description> Test XHTML 5.0: empty elements with non-empty content model in XHTML namespace. </description>
      <created by="Michael Kay" on="2012-12-05"/>
      <modified by="Abel Braaksma" on="2013-12-10"
         change="@html-version occured in xslt3.0 spec, stylesheet @version=3.0"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0218.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<title></title>]]></serialization-matches>
            <serialization-matches><![CDATA[<p></p>]]></serialization-matches>
            <serialization-matches><![CDATA[<i></i>]]></serialization-matches>
            <serialization-matches><![CDATA[<u></u>]]></serialization-matches>
            <serialization-matches><![CDATA[<div></div>]]></serialization-matches>
            <serialization-matches><![CDATA[<code></code>]]></serialization-matches>
            <serialization-matches><![CDATA[<strong></strong>]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0219">
      <description> Test XHTML 5.0: empty elements with non-empty content model in no namespace. </description>
      <created by="Michael Kay" on="2012-12-05"/>
      <modified by="Abel Braaksma" on="2013-12-10"
         change="@html-version occured in xslt3.0 spec, stylesheet @version=3.0"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0219.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<title></title>]]></serialization-matches>
            <serialization-matches><![CDATA[<p></p>]]></serialization-matches>
            <serialization-matches><![CDATA[<i></i>]]></serialization-matches>
            <serialization-matches><![CDATA[<u></u>]]></serialization-matches>
            <serialization-matches><![CDATA[<div></div>]]></serialization-matches>
            <serialization-matches><![CDATA[<code></code>]]></serialization-matches>
            <serialization-matches><![CDATA[<strong></strong>]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0220">
      <description> Test XHTML 5.0: empty elements with non-empty content model in no namespace,
         this time with attributes </description>
      <created by="Michael Kay" on="2012-12-05"/>
      <modified by="Abel Braaksma" on="2013-12-10"
         change="@html-version occured in xslt3.0 spec, stylesheet @version=3.0"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0220.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<title\s+class="c"></title>]]></serialization-matches>
            <serialization-matches><![CDATA[<p\s+class="c"></p>]]></serialization-matches>
            <serialization-matches><![CDATA[<i\s+class="c"></i>]]></serialization-matches>
            <serialization-matches><![CDATA[<u\s+class="c"></u>]]></serialization-matches>
            <serialization-matches><![CDATA[<div\s+class="c"></div>]]></serialization-matches>
            <serialization-matches><![CDATA[<code\s+class="c"></code>]]></serialization-matches>
            <serialization-matches><![CDATA[<strong\s+class="c"></strong>]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0221">
      <description> Test XHTML 5.0: empty elements with non-empty content model in XHTML namespace,
         this time with attributes </description>
      <created by="Michael Kay" on="2012-12-05"/>
      <modified by="Abel Braaksma" on="2013-12-10"
         change="@html-version occured in xslt3.0 spec, stylesheet @version=3.0"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0221.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<title\s+class="c"></title>]]></serialization-matches>
            <serialization-matches><![CDATA[<p\s+class="c"></p>]]></serialization-matches>
            <serialization-matches><![CDATA[<i\s+class="c"></i>]]></serialization-matches>
            <serialization-matches><![CDATA[<u\s+class="c"></u>]]></serialization-matches>
            <serialization-matches><![CDATA[<div\s+class="c"></div>]]></serialization-matches>
            <serialization-matches><![CDATA[<code\s+class="c"></code>]]></serialization-matches>
            <serialization-matches><![CDATA[<strong\s+class="c"></strong>]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0222">
      <description> Test XHTML 5.0: empty elements in XHTML namespace, with attributes. </description>
      <created by="Michael Kay" on="2012-12-05"/>
      <modified by="Abel Braaksma" on="2013-12-10"
         change="@html-version occured in xslt3.0 spec, stylesheet @version=3.0"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0222.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<area\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<base\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<br\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<col\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<command\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<embed\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<hr\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<img\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<input\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<keygen\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<link\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<meta\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<param\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<source\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<track\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<wbr\s*class=['"]s['"]\s*/>]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0223">
      <description> Test XHTML 5.0: empty elements in no namespace, with attributes. </description>
      <created by="Michael Kay" on="2012-12-05"/>
      <modified by="Abel Braaksma" on="2013-12-10"
         change="@html-version occured in xslt3.0 spec, stylesheet @version=3.0"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0223.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<area\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<base\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<br\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<col\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<command\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<embed\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<hr\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<img\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<input\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<keygen\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<link\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<meta\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<param\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<source\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<track\s*class=['"]s['"]\s*/>]]></serialization-matches>
            <serialization-matches><![CDATA[<wbr\s*class=['"]s['"]\s*/>]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0224">
      <description> Test XHTML 5.0: SVG and MathML elements using default namespace. </description>
      <created by="Michael Kay" on="2012-12-05"/>
      <modified by="Abel Braaksma" on="2013-12-10"
         change="@html-version occured in xslt3.0 spec, stylesheet @version=3.0"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0224.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<html\s+xmlns=['"]http://www.w3.org/1999/xhtml['"]\s*>]]></serialization-matches>
            <serialization-matches><![CDATA[<svg\s+(version=['"]1.1['"]\s+)?xmlns=['"]http://www.w3.org/2000/svg['"]\s*(version=['"]1.1['"]\s*)?>]]></serialization-matches>
            <serialization-matches><![CDATA[<math\s+(display=['"]block['"]\s+)?xmlns=['"]http://www.w3.org/1998/Math/MathML['"]\s*(display=['"]block['"]\s*)?>]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0225">
      <description> Test XHTML 5.0: SVG and MathML elements using non-default namespace. </description>
      <created by="Michael Kay" on="2012-12-05"/>
      <modified by="Abel Braaksma" on="2013-12-10"
         change="@html-version occured in xslt3.0 spec, stylesheet @version=3.0"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0225.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<html\s+xmlns=['"]http://www.w3.org/1999/xhtml['"]\s*>]]></serialization-matches>
            <serialization-matches><![CDATA[<svg\s+(version=['"]1.1['"]\s+)?xmlns=['"]http://www.w3.org/2000/svg['"]\s*(version=['"]1.1['"]\s*)?>]]></serialization-matches>
            <serialization-matches><![CDATA[<math\s+(display=['"]block['"]\s+)?xmlns=['"]http://www.w3.org/1998/Math/MathML['"]\s*(display=['"]block['"]\s*)?>]]></serialization-matches>
            <not>
               <serialization-matches>h:</serialization-matches>
            </not>
            <not>
               <serialization-matches>s:</serialization-matches>
            </not>
            <not>
               <serialization-matches>m:</serialization-matches>
            </not>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0226">
      <description> Test XHTML 5.0: SVG elements mixing default and non-default namespace. Assumes
         resolution of bug 20261. </description>
      <created by="Michael Kay" on="2012-12-06"/>
      <modified by="Abel Braaksma" on="2013-12-10"
         change="@html-version occured in xslt3.0 spec, stylesheet @version=3.0"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0226.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<html\s+xmlns=['"]http://www.w3.org/1999/xhtml['"]\s*>]]></serialization-matches>
            <serialization-matches><![CDATA[<svg\s+(version=['"]1.1['"]\s+)?xmlns=['"]http://www.w3.org/2000/svg['"]\s*(version=['"]1.1['"]\s*)?>]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0227">
      <description> Test XHTML 5.0: doctype-system and doctype-public </description>
      <created by="Michael Kay" on="2012-12-06"/>
      <modified by="Abel Braaksma" on="2013-12-10"
         change="@html-version occured in xslt3.0 spec, stylesheet @version=3.0"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0227.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches><![CDATA[<!DOCTYPE\s+html\s+PUBLIC\s+"-//W3C//DTD\sXHTML\s1.0\sStrict//EN"\s+"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0228">
      <description> Test XHTML 5.0: doctype-system and no doctype-public </description>
      <created by="Michael Kay" on="2012-12-06"/>
      <modified by="Abel Braaksma" on="2013-12-10"
         change="@html-version occured in xslt3.0 spec, stylesheet @version=3.0"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0228.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches><![CDATA[<!DOCTYPE\s+html\s+SYSTEM\s+"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0229">
      <description> Test XHTML 5.0: doctype-public and no doctype-system. See bug 20264. 
         Test result prior to 2015-04-10 assumed no DOCTYPE declaration is output in this situation,
         but the effect of the ruling on bug 20264 is that a DOCTYPE declaration should be output. 
      </description>
      <created by="Michael Kay" on="2012-12-06"/>
      <modified by="Abel Braaksma" on="2013-12-10"
         change="@html-version occured in xslt3.0 spec, stylesheet @version=3.0"/>
      <modified by="Debbie Lockett" on="2014-08-07" change="Add error in not/any-of assertions"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <modified by="Michael Kay" on="2015-04-10" change="The decision on bug 20264 means that a DOCTYPE should be output. Change expected result."/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0229.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches><![CDATA[<!DOCTYPE\s+html\s*>]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0230">
      <description> Invalid value for html-version </description>
      <created by="Michael Kay" on="2012-12-06"/>
      <modified by="Abel Braaksma" on="2013-12-09"
         change="Corrected error code from XTSE0010 to XTSE0020 (invalid attribute value)"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0230.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <error code="XTSE0020"/>
      </result>
   </test-case>

   <test-case name="output-0231">
      <description> html-version="5" (not "5.0") </description>
      <created by="Michael Kay" on="2014-05-07"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0231.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches><![CDATA[<!DOCTYPE\s+html\s+PUBLIC\s+"-//W3C//DTD\sXHTML\s1.0\sStrict//EN"\s+"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">]]></serialization-matches>
      </result>
   </test-case>
   
   <test-case name="output-0232">
      <description>xml method, suppress-indentation </description>
      <created by="Michael Kay" on="2015-09-09"/>
      <environment ref="output-02"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0232.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
        <all-of>
         <serialization-matches><![CDATA[chapter>\s+<p]]></serialization-matches>
         <serialization-matches><![CDATA[cap><small]]></serialization-matches>
         <serialization-matches><![CDATA[wizard><cap]]></serialization-matches>
         <serialization-matches><![CDATA[small></wizard]]></serialization-matches>
         <serialization-matches><![CDATA[big><little]]></serialization-matches>
         <serialization-matches><![CDATA[hobbit><big]]></serialization-matches>
         <serialization-matches><![CDATA[little></hobbit]]></serialization-matches>
        </all-of> 
      </result>
   </test-case>
   
   <test-case name="output-0280">
      <description>Test that an error is raised on invalid @indent value in
         xsl:output.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="all-of to any-of"/>
      <modified by="Tim Mills" on="2013-01-29" change="error to assert-serialization-error"/>
      <modified by="Debbie Lockett" on="2014-08-06"
         change="spec value to XSLT20 only, see test output-0280a"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20"/>
      </dependencies>
      <test>
         <stylesheet file="output-0280.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <any-of>
            <assert-serialization-error code="SEPM0016"/>
            <error code="XTSE0020"/>
         </any-of>
      </result>
   </test-case>

   <test-case name="output-0280a">
      <description>Test that an error is raised on invalid @indent value ("TRUE") in
         xsl:output.</description>
      <created by="Debbie Lockett" on="2014-08-06"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0280a.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <any-of>
            <assert-serialization-error code="SEPM0016"/>
            <error code="XTSE0020"/>
         </any-of>
      </result>
   </test-case>

   <test-case name="output-0281">
      <description>Test that an error is raised on invalid @omit-xml-declaration value in
         xsl:output.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="all-of to any-of"/>
      <modified by="Tim Mills" on="2013-01-29" change="error to assert-serialization-error"/>
      <modified by="Debbie Lockett" on="2014-08-06"
         change="spec value to XSLT20 only, see test output-0281a"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20"/>
      </dependencies>
      <test>
         <stylesheet file="output-0281.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <any-of>
            <assert-serialization-error code="SEPM0016"/>
            <error code="XTSE0020"/>
         </any-of>
      </result>
   </test-case>

   <test-case name="output-0281a">
      <description>Test that an error is raised on invalid @omit-xml-declaration value ("YES") in
         xsl:output.</description>
      <created by="Debbie Lockett" on="2014-08-06"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0281a.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <any-of>
            <assert-serialization-error code="SEPM0016"/>
            <error code="XTSE0020"/>
         </any-of>
      </result>
   </test-case>

   <test-case name="output-0282">
      <description>Test that an error is raised on invalid @standalone value in
         xsl:output.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="all-of to any-of"/>
      <modified by="Tim Mills" on="2013-01-29" change="error to assert-serialization-error"/>
      <modified by="Debbie Lockett" on="2014-08-06"
         change="spec value to XSLT20 only, see test output-0282a"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20"/>
      </dependencies>
      <test>
         <stylesheet file="output-0282.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <any-of>
            <assert-serialization-error code="SEPM0016"/>
            <error code="XTSE0020"/>
         </any-of>
      </result>
   </test-case>

   <test-case name="output-0282a">
      <description>Test that an error is raised on invalid @standalone value ("TRUE") in
         xsl:output.</description>
      <created by="Debbie Lockett" on="2014-08-06"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0282a.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <any-of>
            <assert-serialization-error code="SEPM0016"/>
            <error code="XTSE0020"/>
         </any-of>
      </result>
   </test-case>

   <test-case name="output-0283">
      <description>Test that an error is raised on invalid @undeclare-prefixes value in
         xsl:output.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="Tim Mills" on="2013-01-29" change="all-of to any-of"/>
      <modified by="Tim Mills" on="2013-01-29" change="error to assert-serialization-error"/>
      <modified by="Debbie Lockett" on="2014-08-06"
         change="spec value to XSLT20 only, see test output-0283a"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20"/>
      </dependencies>
      <test>
         <stylesheet file="output-0283.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <any-of>
            <assert-serialization-error code="SEPM0016"/>
            <error code="XTSE0020"/>
         </any-of>
      </result>
   </test-case>

   <test-case name="output-0283a">
      <description>Test that an error is raised on invalid @undeclare-prefixes value ("True") in
         xsl:output.</description>
      <created by="Debbie Lockett" on="2014-08-06"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0283a.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <any-of>
            <assert-serialization-error code="SEPM0016"/>
            <error code="XTSE0020"/>
         </any-of>
      </result>
   </test-case>

   <test-case name="output-0284">
      <description>Test that an error is raised on invalid @doctype-public value in xsl:output. See
         XSLT 2.0 Erratum E3</description>
      <created by="Michael Kay" on="2012-11-07"/>
      <modified by="Tim Mills" on="2013-01-29" change="all-of to any-of"/>
      <modified by="Tim Mills" on="2013-01-29" change="error to assert-serialization-error"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0284.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <any-of>
            <assert-serialization-error code="SEPM0016"/>
            <error code="XTSE0020"/>
         </any-of>
      </result>
   </test-case>
   
   <test-case name="output-0285">
      <description>Unknown attributes on xsl:output are ignored. Test case from Radu Pisoi</description>
      <created by="Michael Kay" on="2015-04-30"/>
      <environment ref="output-01"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0285.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches><![CDATA[<ok/>]]></serialization-matches>
      </result>
   </test-case>


   <test-case name="output-0301">
      <description>Simple test for using character maps with the XHTML output method.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-03"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0301.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output178.out"/>
      </result>
   </test-case>

   <test-case name="output-0302">
      <description>Simple test for using character maps with the HTML output method.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-03"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0302.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="html" file="output179.out"/>
      </result>
   </test-case>

   <test-case name="output-0303">
      <description>Simple test for using character maps with the TEXT output method.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-03"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0303.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="text" file="output180.out"/>
      </result>
   </test-case>

   <test-case name="output-0304">
      <description>Test @use-character-maps on xsl:result-document, referencing a character map with
         prefixed name by using a different prefix bound to the same namespace.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-03"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0304.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xml" file="output183.out"/>
      </result>
   </test-case>

   <test-case name="output-0305">
      <description>Test merging of two xsl:output declaration where the resulting concatenated
         sequence of all use-character-maps is taken in declaration order.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-03"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0305.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xml" file="output186.out"/>
      </result>
   </test-case>

   <test-case name="output-0306">
      <description> Test merging of two xsl:output declaration where the resulting concatenated
         sequence of all use-character-maps is taken in order of increasing import precedence. </description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-03"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0306.xsl"/>
         <stylesheet file="output-0306y.xsl" role="secondary"/>
         <stylesheet file="output-0306z.xsl" role="secondary"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xml" file="output187.out"/>
      </result>
   </test-case>

   <test-case name="output-0307">
      <description>Test with xsl:output that has @use-character-maps and an xsl:result-document that
         uses this output declaration but includes @use-character-maps on its own. Show that the
         charactes-maps references in xsl:result-document supplement and take precedence over the
         ones from the xsl:output declaration.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-03"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0307.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xml" file="output191.out"/>
      </result>
   </test-case>

   <test-case name="output-0308">
      <description> Test of merging two named output declarations with different import precedence
         and different values for the same attributes. Show that the values from the declaration
         with higher import precedence takes effect. Attributes tested: -byte-order-mark,
         escape-uri-attributes, include-content-type, undeclare-prefixes, use-character-maps </description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-03"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0308.xsl"/>
         <stylesheet file="output-0308a.xsl" role="secondary"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<p>xxBxx</p>]]></serialization-matches>
            <serialization-matches><![CDATA[<p>yy\*\$yy</p>]]></serialization-matches>
            <serialization-matches><![CDATA[<p>zz%Bzz</p>]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0309">
      <description>Simple test for using a list of character maps with the XML output
         method.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-03"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0309.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xml" file="output199.out"/>
      </result>
   </test-case>

   <test-case name="output-0310">
      <description>Show that text node children of elements present in @cdata-section-elements are
         not affected by character maps.</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-03"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0310.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xml" file="output200.out"/>
      </result>
   </test-case>

   <test-case name="output-0311">
      <description>Use a system identifier in doctype-system that contains a double-quote
         character</description>
      <created by="Michael Kay" on="2012-11-07"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-03"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0311.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<\?xml]]></serialization-matches>
            <serialization-matches><![CDATA[<!DOCTYPE\s+a\s+PUBLIC\s+"ABC'DEF"\s+'ABC"DEF'>]]></serialization-matches>
            <serialization-matches><![CDATA[<a/>]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0312">
      <description> Override a system identifier and public identifier using doctype-system="",
         doctype-public="": see erratum E31 </description>
      <created by="Michael Kay" on="2012-11-07"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-03"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0312.xsl"/>
         <stylesheet file="output-0312a.xsl" role="secondary"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xml" file="output301.out"/>
      </result>
   </test-case>

   <test-case name="output-0313">
      <description>Override a system identifier and public identifier using doctype-system="",
         doctype-public="": see erratum E31</description>
      <created by="Michael Kay" on="2012-11-07"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-03"/>
      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0313.xsl"/>
         <stylesheet file="output-0313a.xsl" role="secondary"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xml" file="output302.out"/>
      </result>
   </test-case>

   <test-case name="output-0401">
      <description>Test for disabling output escaping in xsl:value-of</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-04"/>
      <dependencies>
         <spec value="XSLT20+"/>
         <feature value="disabling_output_escaping"/>
      </dependencies>
      <test>
         <stylesheet file="output-0401.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output401.out"/>
      </result>
   </test-case>

   <test-case name="output-0402">
      <description>Test for disabling output escaping in xsl:value-of in XSLT 2.0</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <modified by="Abel Braaksma" on="2015-03-30" change="
         Bug 23896
         - Fix to allow for optional recovery,
         - changed to 2.0 only (error is not allowed in 3.0),
         - added 3.0 version output-0402a"/>
      <environment ref="output-04"/>
      <dependencies>
         <spec value="XSLT20+"/>
         <feature value="disabling_output_escaping" satisfied="false"/>
      </dependencies>
      <test>
         <stylesheet file="output-0401.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <any-of>
            <!-- recovery option: -->
            <assert-serialization><![CDATA[<out xmlns="http://www.w3.org/1999/xhtml">&lt;p&gt;&amp;nbsp;&lt;/p&gt;</out>]]></assert-serialization>
            <!-- or raise error -->
            <error code="XTRE1620"/>
         </any-of>
      </result>
   </test-case>

   <test-case name="output-0402a">
      <description>Test for disabling output escaping in XSLT 3.0 in xsl:value-of when feature is switched off or not available</description>
      <created by="Abel Braaksma" on="2015-03-30"/>
      <environment ref="output-04"/>
      <dependencies>
         <spec value="XSLT30+"/>
         <feature value="disabling_output_escaping" satisfied="false"/>
      </dependencies>
      <test>
         <stylesheet file="output-0401.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <any-of>
            <assert-serialization><![CDATA[<out xmlns="http://www.w3.org/1999/xhtml">&lt;p&gt;&amp;nbsp;&lt;/p&gt;</out>]]></assert-serialization>
         </any-of>
      </result>
   </test-case>

   <test-case name="output-0403">
      <description>Test for disabling-output-escaping="true" in xsl:value-of</description>
      <created by="Debbie Lockett" on="2014-08-08"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-04"/>
      <dependencies>
         <spec value="XSLT30+"/>
         <feature value="disabling_output_escaping"/>
      </dependencies>
      <test>
         <stylesheet file="output-0403.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output401.out"/>
      </result>
   </test-case>

   <test-case name="output-0404">
      <description>Test for disabling-output-escaping=" 1 " in xsl:value-of</description>
      <created by="Debbie Lockett" on="2014-08-08"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-04"/>
      <dependencies>
         <spec value="XSLT30+"/>
         <feature value="disabling_output_escaping"/>
      </dependencies>
      <test>
         <stylesheet file="output-0404.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <assert-serialization method="xhtml" file="output401.out"/>
      </result>
   </test-case>

   <test-case name="output-0405">
      <description>Test for disabling-output-escaping="no" in xsl:value-of</description>
      <created by="Debbie Lockett" on="2014-08-08"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-04"/>
      <dependencies>
         <spec value="XSLT20+"/>
         <feature value="disabling_output_escaping"/>
      </dependencies>
      <test>
         <stylesheet file="output-0405.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches><![CDATA[&lt;p&gt;&amp;nbsp;&lt;/p&gt;]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0406">
      <description>Test for disabling-output-escaping="false" in xsl:value-of</description>
      <created by="Debbie Lockett" on="2014-08-08"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-04"/>
      <dependencies>
         <spec value="XSLT30+"/>
         <feature value="disabling_output_escaping"/>
      </dependencies>
      <test>
         <stylesheet file="output-0406.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches><![CDATA[&lt;p&gt;&amp;nbsp;&lt;/p&gt;]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0407">
      <description>Test for disabling-output-escaping="0" in xsl:value-of</description>
      <created by="Debbie Lockett" on="2014-08-08"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-04"/>
      <dependencies>
         <spec value="XSLT30+"/>
         <feature value="disabling_output_escaping"/>
      </dependencies>
      <test>
         <stylesheet file="output-0407.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <serialization-matches><![CDATA[&lt;p&gt;&amp;nbsp;&lt;/p&gt;]]></serialization-matches>
      </result>
   </test-case>

   <test-case name="output-0408">
      <description>Test for disabling-output-escaping="YES" (not allowed) in
         xsl:value-of</description>
      <created by="Debbie Lockett" on="2014-08-08"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment ref="output-04"/>
      <dependencies>
         <spec value="XSLT20+"/>
         <feature value="disabling_output_escaping"/>
      </dependencies>
      <test>
         <stylesheet file="output-0408.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <any-of>
            <assert-serialization-error code="SEPM0016"/>
            <error code="XTSE0020"/>
         </any-of>
      </result>
   </test-case>

   <test-case name="output-0501">
      <description>Test for missing name in xsl:character-map. Static error</description>
      <created by="Michael Kay" on="2012-10-30"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <environment>
         <source role=".">
            <content><![CDATA[<!-- Test for Serialization --><doc><a>&#xA;</a><a>bbb</a></doc>]]></content>
         </source>
      </environment>

      <dependencies>
         <spec value="XSLT20+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0501.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <error code="XTSE0010"/>
      </result>
   </test-case>


   <!-- Tests for HTML5 -->

   <test-case name="output-0601">
      <description>HTML5 empty content elements</description>
      <created by="John Lumley" on="2014-06-19"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <modified by="Michael Kay" on="2014-09-28" change="HTML5 serialization is not defined in XSLT 2.0"/>
      <environment>
         <source role="." file="output06c.xml"/>
      </environment>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0601.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[<area\s*>]]></serialization-matches>
            <serialization-matches><![CDATA[<base\s*>]]></serialization-matches>
            <serialization-matches><![CDATA[<br\s*>]]></serialization-matches>
            <serialization-matches><![CDATA[<col\s*>]]></serialization-matches>
            <serialization-matches><![CDATA[<command\s*>]]></serialization-matches>
            <serialization-matches><![CDATA[<embed\s*>]]></serialization-matches>
            <serialization-matches><![CDATA[<hr\s*>]]></serialization-matches>
            <serialization-matches><![CDATA[<img\s*>]]></serialization-matches>
            <serialization-matches><![CDATA[<input\s*>]]></serialization-matches>
            <serialization-matches><![CDATA[<keygen\s*>]]></serialization-matches>
            <serialization-matches><![CDATA[<link\s*>]]></serialization-matches>
            <serialization-matches><![CDATA[<meta\s*>]]></serialization-matches>
            <serialization-matches><![CDATA[<param\s*>]]></serialization-matches>
            <serialization-matches><![CDATA[<source\s*>]]></serialization-matches>
            <serialization-matches><![CDATA[<track\s*>]]></serialization-matches>
            <serialization-matches><![CDATA[<wbr\s*>]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0602a">
      <description>HTML5 svg unprefixed</description>
      <created by="John Lumley" on="2014-07-15"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <modified by="John Lumley" on="2014-09-10" change="Serialization declaration moved to environment"/>
      <modified by="Michael Kay" on="2014-09-28" change="HTML5 serialization is not defined in XSLT 2.0"/>
      <environment ref="output-06a"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
       </test>
      <result>
         <all-of>
            <not>
               <any-of>
                  <serialization-matches><![CDATA[<body\s+xmlns=["']http://www.w3.org/2000/svg["']]]></serialization-matches>
                  <serialization-matches>xmlns:svg=["']http://www.w3.org/2000/svg["']</serialization-matches>
               </any-of>
            </not>
            <serialization-matches><![CDATA[<svg\s+xmlns=["']http://www.w3.org/2000/svg["']]]></serialization-matches>
         </all-of>
      </result>
   </test-case>
   
   <test-case name="output-0602b">
      <description>HTML5 MathML unprefixed</description>
      <created by="John Lumley" on="2014-07-15"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <modified by="John Lumley" on="2014-09-10" change="Serialization declaration moved to environment"/>
      <modified by="Michael Kay" on="2014-09-28" change="HTML5 serialization is not defined in XSLT 2.0"/>
      <environment ref="output-06a"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
      </test>
      <result>
         <all-of>
            <not>
               <any-of>
                  <serialization-matches>xmlns:mathML=["']http://www.w3.org/1998/Math/MathML["']</serialization-matches>
               </any-of>
            </not>
            <serialization-matches><![CDATA[<math\s+xmlns=["']http://www.w3.org/1998/Math/MathML["']]]></serialization-matches>
         </all-of>
      </result>
   </test-case>
   
   <test-case name="output-0602c">
      <description>HTML5 foreign namespace prefixed</description>
      <created by="John Lumley" on="2014-07-15"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <modified by="John Lumley" on="2014-09-10" change="Serialization declaration moved to environment"/>
      <modified by="Michael Kay" on="2014-09-28" change="HTML5 serialization is not defined in XSLT 2.0"/>
      <environment ref="output-06a"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
      </test>
      <result>
         <all-of>
            <serialization-matches>xmlns:n=["']NamespaceN["']</serialization-matches>
            <serialization-matches><![CDATA[<n:zzz>]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0603a">
      <description>HTML5 svg:attribute prefixed</description>
      <created by="John Lumley" on="2014-07-15"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <modified by="John Lumley" on="2014-09-10" change="Serialization declaration moved to environment"/>
      <modified by="Michael Kay" on="2014-09-28" change="HTML5 serialization is not defined in XSLT 2.0"/>
      <environment ref="output-06b"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
      </test>
      <result>
         <all-of>
            <serialization-matches>mi\s+xmlns:svg=["']http://www.w3.org/2000/svg["']</serialization-matches>
            <serialization-matches>svg:att=</serialization-matches>
         </all-of>
      </result>
   </test-case>
   
   <test-case name="output-0603b">
      <description>HTML5 MathML:attribute prefixed</description>
      <created by="John Lumley" on="2014-07-15"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <modified by="John Lumley" on="2014-09-10" change="Serialization declaration moved to environment"/>
      <modified by="Michael Kay" on="2014-09-28" change="HTML5 serialization is not defined in XSLT 2.0"/>
      <environment ref="output-06b"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
      </test>
      <result>
         <all-of>
            <serialization-matches>xmlns:mathML=["']http://www.w3.org/1998/Math/MathML["']</serialization-matches>
            <serialization-matches>mathML:att=</serialization-matches>
         </all-of>
      </result>
   </test-case>
   
   <test-case name="output-0603c">
      <description>HTML5 foreign namespace attribute prefixed</description>
      <created by="John Lumley" on="2014-07-15"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <modified by="John Lumley" on="2014-09-10" change="Serialization declaration moved to environment"/>
      <modified by="Michael Kay" on="2014-09-28" change="HTML5 serialization is not defined in XSLT 2.0"/>
      <environment ref="output-06b"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
      </test>
      <result>
         <all-of>
            <serialization-matches>xmlns:m=["']NamespaceM["']</serialization-matches>
            <serialization-matches><![CDATA[<p m:zzz=["']value["']>]]></serialization-matches>
         </all-of>
      </result>
   </test-case>

   <test-case name="output-0604">
      <description>HTML5 - test simple use of a character map</description>
      <created by="John Lumley" on="2014-07-18"/>
      <modified by="John Lumley" on="2014-09-02" change="Declared serialization requirement"/>
      <modified by="Michael Kay" on="2014-09-28" change="HTML5 serialization is not defined in XSLT 2.0"/>
      <environment>
         <source role=".">
            <content><![CDATA[<doc><a value="abcde">vwxyz</a></doc>]]></content>
         </source>
      </environment>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0602.xsl"/>
         <output serialize="yes"/>
      </test>
      <result>
         <all-of>
            <serialization-matches>value=['"]ab\[C\]de['"]</serialization-matches>
            <serialization-matches>vw\[X\]yz</serialization-matches>
         </all-of>
      </result>
   </test-case>
   
   <test-case name="output-0701">
      <description>JSON serialization</description>
      <created by="Michael Kay" on="2016-12-16"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0701.xsl"/>
         <output serialize="yes" tree="no"/>
      </test>
      <result>
         <all-of>
            <any-of>
               <serialization-matches>\{"value":9,"index":3\}</serialization-matches>
               <serialization-matches>\{"index":3,"index":9\}</serialization-matches>
            </any-of>
            <any-of>
               <serialization-matches>\{"value":16,"index":4\}</serialization-matches>
               <serialization-matches>\{"index":4,"index":16\}</serialization-matches>
            </any-of>
            <serialization-matches>^\[\{</serialization-matches>
            <serialization-matches>\}\]$</serialization-matches>
         </all-of>
      </result>
   </test-case>
   <test-case name="output-0702">
      <description>JSON serialization with nested HTML</description>
      <created by="Michael Kay" on="2016-12-16"/>
      <dependencies>
         <spec value="XSLT30+"/>
      </dependencies>
      <test>
         <stylesheet file="output-0702.xsl"/>
         <output serialize="yes" tree="no"/>
      </test>
      <result>
         <all-of>
            <serialization-matches><![CDATA[\{"doc1":"<html xmlns=\\"http:\\/\\/www.w3.org\\/1999\\/xhtml\\"><head><meta http-equiv=\\"Content-Type\\" content=\\"text\\/html; charset=UTF-8\\"><\\/meta><title>Document 1<\\/title>]]></serialization-matches>          
         </all-of>
      </result>
   </test-case>

</test-set>
