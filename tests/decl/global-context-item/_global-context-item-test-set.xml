<?xml version="1.0" encoding="UTF-8"?>
<test-set xmlns:xs="http://www.w3.org/2001/XMLSchema"
          xmlns="http://www.w3.org/2012/10/xslt-test-catalog"
          name="global-context-item">
   <description>Tests xsl:global-context-item</description>
   <environment name="glob-cxt-item-A">
      <source role=".">
         <content><![CDATA[<doc/>]]></content>
      </source>
   </environment>
   
   <dependencies>
      <spec value="XSLT30+"/>
   </dependencies>

   
   <test-case name="glob-cxt-item-001">
      <description>Test xsl:global-context-item with required type satisfied</description>
      <created by="Michael Kay" on="2014-10-10"/>
      <environment ref="glob-cxt-item-A"/>    
      <test>
         <package file="glob-cxt-item-001.xsl" role="principal"/>
      </test>
      <result>
         <assert>/out/doc = ""</assert>
      </result>
   </test-case>
   
   <test-case name="glob-cxt-item-002">
      <description>Test xsl:global-context-item with required type not satisfied</description>
      <created by="Michael Kay" on="2014-10-10"/>
      <modified by="Michael Kay" on="2015-08-24" change="Correct expected error code"/>
      <environment ref="glob-cxt-item-A"/>    
      <test>
         <package file="glob-cxt-item-002.xsl" role="principal"/>
      </test>
      <result>
         <error code="XTTE0590"/>
      </result>
   </test-case>
   
   <test-case name="glob-cxt-item-003">
      <description>Test xsl:global-context-item with use="absent". The processor may either report
      an error because a context item is supplied, or it may run the stylesheet with no context item,
      in which case it fails dynamically with XPDY0002 because the context item is absent.</description>
      <created by="Michael Kay" on="2014-10-10"/>
      <modified by="Michael Kay" on="2015-01-26" change="keyword change: prohibited -> absent"/>
      <environment ref="glob-cxt-item-A"/>    
      <test>
         <package file="glob-cxt-item-003.xsl" role="principal"/>
      </test>
      <result>
         <error code="XPDY0002"/>
      </result>
   </test-case>
   
   <test-case name="glob-cxt-item-004">
      <description>It is a static error if more than one xsl:global-context-item declaration appears within a stylesheet module</description>
      <created by="Michael Kay" on="2016-09-12"/>
      <environment ref="glob-cxt-item-A"/>    
      <test>
         <package file="glob-cxt-item-004.xsl" role="principal"/>
         <initial-mode name="m"/>
      </test>
      <result>
         <error code="XTSE3087"/>
      </result>
   </test-case>
   
   <test-case name="glob-cxt-item-005">
      <description>It is a static error if ... several modules within a single package contain inconsistent xsl:global-context-item declarations</description>
      <created by="Michael Kay" on="2016-09-12"/>
      <environment ref="glob-cxt-item-A"/>    
      <test>
         <package file="glob-cxt-item-005.xsl" role="principal"/>
         <initial-mode name="m"/>
      </test>
      <result>
         <error code="XTSE3087"/>
      </result>
   </test-case>
   
   <test-case name="glob-cxt-item-006">
      <description>By implication: it is not a static error if ... several modules within a single package contain consistent xsl:global-context-item declarations</description>
      <created by="Michael Kay" on="2016-09-12"/>   
      <test>
         <package file="glob-cxt-item-006.xsl" role="principal"/>
      </test>
      <result>
         <assert>/out = '23'</assert>
      </result>
   </test-case>
   
   <test-case name="glob-cxt-item-007">
      <description>It is a static error if ... several modules within a single package contain inconsistent xsl:global-context-item declarations</description>
      <created by="Michael Kay" on="2016-09-12"/>
      <environment ref="glob-cxt-item-A"/>    
      <test>
         <package file="glob-cxt-item-007.xsl" role="principal"/>
         <initial-mode name="m"/>
      </test>
      <result>
         <error code="XTSE3087"/>
      </result>
   </test-case>
   
   <test-case name="glob-cxt-item-008">
      <description>By implication: it is not a static error if ... several modules within a single package contain consistent xsl:global-context-item declarations</description>
      <created by="Michael Kay" on="2016-09-12"/>
      <environment ref="glob-cxt-item-A"/>    
      <test>
         <package file="glob-cxt-item-008.xsl" role="principal"/>
         <initial-mode name="m"/>
      </test>
      <result>
         <assert>/out/doc</assert>
      </result>
   </test-case>
   
</test-set>