<?xml version="1.0" encoding="UTF-8"?>
<test-set xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns="http://www.w3.org/2012/10/xslt-test-catalog"
    xmlns:j="http://www.w3.org/2013/XSL/json"
    name="json-to-xml">
    <description>json-to-xml() function</description>
    
    <!-- NOTE: currently missing tests for string escaping -->

    <environment name="json-to-xml-A">
        <stylesheet file="json-to-xml-A.xsl"/>
    </environment>
    
    <environment name="json-to-xml-E">
        <stylesheet file="json-to-xml-E.xsl"/>
    </environment>



    <dependencies>
        <spec value="XSLT30+"/>
    </dependencies>
    
    
    <test-case name="json-to-xml-001">
        <description>Empty object as document-node</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-A"/>
        <test><initial-template name="json-to-xml-001"/></test>
        <result>
            <assert-xml><![CDATA[<j:map xmlns:j="http://www.w3.org/2013/XSL/json"/>]]></assert-xml>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-002">
        <description>Empty object</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-A"/>
        <test><initial-template name="json-to-xml-002"/></test>
        <result>
            <assert-xml><![CDATA[<j:map xmlns:j="http://www.w3.org/2013/XSL/json"/>]]></assert-xml>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-003">
        <description>Empty array as document-node</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-A"/>
        <test><initial-template name="json-to-xml-003"/></test>
        <result>
            <assert-xml><![CDATA[<j:array xmlns:j="http://www.w3.org/2013/XSL/json"/>]]></assert-xml>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-004">
        <description>Empty array</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-A"/>
        <test><initial-template name="json-to-xml-004"/></test>
        <result>
            <assert-xml><![CDATA[<j:array xmlns:j="http://www.w3.org/2013/XSL/json"/>]]></assert-xml>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-005">
        <description>Array Number</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-A"/>
        <test><initial-template name="json-to-xml-005"/></test>
        <result>
            <assert-xml><![CDATA[<j:array xmlns:j="http://www.w3.org/2013/XSL/json"><j:number>1</j:number></j:array>]]></assert-xml>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-006">
        <description>Array String</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-A"/>
        <test><initial-template name="json-to-xml-006"/></test>
        <result>
            <assert-xml><![CDATA[<j:array xmlns:j="http://www.w3.org/2013/XSL/json"><j:string>a</j:string></j:array>]]></assert-xml>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-007">
        <description>Array True</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-A"/>
        <test><initial-template name="json-to-xml-007"/></test>
        <result>
            <assert-xml><![CDATA[<j:array xmlns:j="http://www.w3.org/2013/XSL/json"><j:boolean>true</j:boolean></j:array>]]></assert-xml>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-008">
        <description>Array False</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-A"/>
        <test><initial-template name="json-to-xml-008"/></test>
        <result>
            <assert-xml><![CDATA[<j:array xmlns:j="http://www.w3.org/2013/XSL/json"><j:boolean>false</j:boolean></j:array>]]></assert-xml>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-009">
        <description>Array Null</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-A"/>
        <test><initial-template name="json-to-xml-009"/></test>
        <result>
            <assert-xml><![CDATA[<j:array xmlns:j="http://www.w3.org/2013/XSL/json"><j:null/></j:array>]]></assert-xml>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-010">
        <description>Larger JSON input</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-A"/>
        <test><initial-template name="json-to-xml-010"/></test>
        <result>
            <all-of>
                <assert>/j:map/j:map[@key='glossary']/j:string[@key='title']</assert>
                <assert>/j:map/j:map[@key='glossary']/j:map[@key='GlossDiv']</assert>
            </all-of>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-011">
        <description>Larger JSON input</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-A"/>
        <test><initial-template name="json-to-xml-011"/></test>
        <result>
            <all-of>
                <assert>/j:map/j:map[@key='menu']/j:string[@key='header'][.='SVG Viewer']</assert>
                <assert>/j:map/j:map[@key='menu']/j:array[@key='items']/j:map[not(@*)]/j:string[@key='id'][.='Open']</assert>
            </all-of>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-012">
        <description>Escaped text</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-A"/>
        <test><initial-template name="json-to-xml-012"/></test>
        <result>
            <assert-xml><![CDATA[<j:map xmlns:j="http://www.w3.org/2013/XSL/json"><j:string key="key">Data with " within it</j:string></j:map>]]></assert-xml>
        </result>
    </test-case>
    

    <test-case name="json-to-xml-error-001">
        <description>Empty string</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-001"/>
        </test>
        <result>
            <error code="XTDE3240"/>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-error-002">
        <description>Unknown token</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-002"/>
        </test>
        <result>
            <error code="XTDE3240"/>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-error-003">
        <description>Unknown token</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-003"/>
        </test>
        <result>
            <error code="XTDE3240"/>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-error-004">
        <description>Extra token</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-004"/>
        </test>
        <result>
            <error code="XTDE3240"/>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-error-005">
        <description>Non-string key</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-005"/>
        </test>
        <result>
            <error code="XTDE3240"/>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-error-006">
        <description>Non-string key</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-006"/>
        </test>
        <result>
            <error code="XTDE3240"/>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-error-007">
        <description>Missing colon after key</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-007"/>
        </test>
        <result>
            <error code="XTDE3240"/>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-error-008">
        <description>Extra token after map value</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-008"/>
        </test>
        <result>
            <error code="XTDE3240"/>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-error-009">
        <description>Extra token after array value</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-009"/>
        </test>
        <result>
            <error code="XTDE3240"/>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-error-010">
        <description>Leading + on number</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-010"/>
        </test>
        <result>
            <error code="XTDE3240"/>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-error-011">
        <description>Redundant leading 0 on number</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-011"/>
        </test>
        <result>
            <error code="XTDE3240"/>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-error-012">
        <description>Hex number</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-012"/>
        </test>
        <result>
            <error code="XTDE3240"/>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-error-013">
        <description>Trailing backslash</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-013"/>
        </test>
        <result>
            <error code="XTDE3240"/>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-error-014">
        <description>Short unicode</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-014"/>
        </test>
        <result>
            <error code="XTDE3240"/>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-error-015">
        <description>Short unicode</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-015"/>
        </test>
        <result>
            <error code="XTDE3240"/>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-error-016">
        <description>Trailing comma in object</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-016"/>
        </test>
        <result>
            <error code="XTDE3240"/>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-error-017">
        <description>Trailing comma in object - liberal spec</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-017"/>
        </test>
        <result>
            <any-of>
                <error code="XTDE3240"/>
                <assert>/*</assert>
            </any-of>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-error-018">
        <description>Trailing comma in array</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-018"/>
        </test>
        <result>
            <error code="XTDE3240"/>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-error-019">
        <description>Trailing comma in array - liberal spec</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-019"/>
        </test>
        <result>
            <any-of>
                <error code="XTDE3240"/>
                <assert>/*</assert>
            </any-of>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-error-020">
        <description>Spec option error</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-020"/>
        </test>
        <result>
            <error code="XTDE3260"/>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-error-021">
        <description>Spec option error</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-021"/>
        </test>
        <result>
            <error code="XTDE3260"/>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-error-022">
        <description>Validate option error</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-022"/>
        </test>
        <result>
            <error code="XTDE3260"/>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-error-023">
        <description>Validate option error</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-023"/>
        </test>
        <result>
            <error code="XTDE3260"/>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-error-024">
        <description>Validate option error</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-024"/>
        </test>
        <result>
            <error code="XTDE3260"/>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-error-025">
        <description>Unescape option error</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-025"/>
        </test>
        <result>
            <error code="XTDE3260"/>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-error-026">
        <description>Unescape option error</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-026"/>
        </test>
        <result>
            <error code="XTDE3260"/>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-error-027">
        <description>Unescape option error</description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-027"/>
        </test>
        <result>
            <error code="XTDE3260"/>
        </result>
    </test-case>
    
    <test-case name="json-to-xml-error-028">
        <description>Fallback option not function </description>
        <created by="John Lumley" on="2013-10-01"/>
        <environment ref="json-to-xml-E"/>
        <test>
            <initial-template name="json-to-xml-error-028"/>
        </test>
        <result>
            <error code="XTDE3260"/>
        </result>
    </test-case>

</test-set>
